machine:
  timezone: Asia/Tokyo

  ruby:
    version: 2.3.3

dependencies:
  cache_directories:
    - "vendor/bundle"
    - "build"
  pre:
    - gem install bundler -v '1.12.5'

  override:
    - bundle check --path=vendor/bundle || bundle install --path=vendor/bundle --jobs=4

test:
  override:
    - bundle exec middleman build

deployment:
  publish:
    branch: master
    commands:
      - bundle exec middleman deploy
